<?php
    ini_set('display_errors', 1);
    ini_set('display_startup_errors', 1);
    error_reporting(E_ALL);
    require '/var/www/html/vendor/autoload.php'; 
    use Firebase\JWT\JWT;
    use Firebase\JWT\Key;

echo "<pre>";



$req['grant_type'] = 'authorization_code';
$req['client_id'] = '5ba66fc84fa1946c9b55';
$req['client_secret'] = 'a09ae018e9b562b7add5af8230d7921161fa853e';
$req['code'] = trim($_GET['code']);
print_r( $req );


$cURLConnection = curl_init('https://tubie.casdoor.com/api/login/oauth/access_token');
curl_setopt($cURLConnection, CURLOPT_POSTFIELDS, $req);
curl_setopt($cURLConnection, CURLOPT_RETURNTRANSFER, true);
$apiResponse = curl_exec($cURLConnection);
curl_close($cURLConnection);
$curl = json_decode($apiResponse, true  );
print_r( $curl );

 

 




//$curl = exec('curl  "https://tubie.casdoor.com/api/login/oauth/access_token" -d "grant_type=authorization_code&client_id=5ba66fc84fa1946c9b55&client_secret=a09ae018e9b562b7add5af8230d7921161fa853e&code=d6878ba9d786e65cd004"');
//$curl = json_decode($curl, true  );
//print_r( $curl );


//  https://marketplace.tube/auth/?code=f90d283e536b8d688436&state=casdoor
// https://marketplace.tube/auth/?code=d6878ba9d786e65cd004&state=casdoor

//echo exec('curl  "https://tubie.casdoor.com/api/login/oauth/access_token" -d "grant_type=authorization_code&client_id=5ba66fc84fa1946c9b55&client_secret=a09ae018e9b562b7add5af8230d7921161fa853e&code=d6878ba9d786e65cd004"');


$json = '{
   "access_token":"eyJhbGciOiJSUzI1NiIsImtpZCI6ImNlcnQtYnVpbHQtaW4iLCJ0eXAiOiJKV1QifQ.eyJvd25lciI6ImJ1aWx0LWluIiwibmFtZSI6Imphc29uIiwiY3JlYXRlZFRpbWUiOiIyMDIzLTExLTE0VDIzOjU4OjEwKzA4OjAwIiwidXBkYXRlZFRpbWUiOiIiLCJpZCI6ImIxODVmZWVmLTQwMmQtNDFlMi05MWE0LTlmMDk1N2NlOWJkZiIsInR5cGUiOiJub3JtYWwtdXNlciIsInBhc3N3b3JkIjoiIiwicGFzc3dvcmRTYWx0IjoiIiwicGFzc3dvcmRUeXBlIjoicGxhaW4iLCJkaXNwbGF5TmFtZSI6Imphc29uIG1leWVycyIsImZpcnN0TmFtZSI6IiIsImxhc3ROYW1lIjoiIiwiYXZhdGFyIjoiaHR0cHM6Ly9jZG4uY2FzYmluLm9yZy9pbWcvY2FzYmluLnN2ZyIsImF2YXRhclR5cGUiOiIiLCJwZXJtYW5lbnRBdmF0YXIiOiIiLCJlbWFpbCI6Imphc29ubWV5ZXJzMjFAeWFob28uY29tIiwiZW1haWxWZXJpZmllZCI6ZmFsc2UsInBob25lIjoiIiwiY291bnRyeUNvZGUiOiIiLCJyZWdpb24iOiIiLCJsb2NhdGlvbiI6IiIsImFkZHJlc3MiOltdLCJhZmZpbGlhdGlvbiI6IiIsInRpdGxlIjoiIiwiaWRDYXJkVHlwZSI6IiIsImlkQ2FyZCI6IiIsImhvbWVwYWdlIjoiIiwiYmlvIjoiIiwibGFuZ3VhZ2UiOiIiLCJnZW5kZXIiOiIiLCJiaXJ0aGRheSI6IiIsImVkdWNhdGlvbiI6IiIsInNjb3JlIjoyMDAwLCJrYXJtYSI6MCwicmFua2luZyI6NCwiaXNEZWZhdWx0QXZhdGFyIjpmYWxzZSwiaXNPbmxpbmUiOmZhbHNlLCJpc0FkbWluIjpmYWxzZSwiaXNGb3JiaWRkZW4iOmZhbHNlLCJpc0RlbGV0ZWQiOmZhbHNlLCJzaWdudXBBcHBsaWNhdGlvbiI6ImFwcC1idWlsdC1pbiIsImhhc2giOiIxMGViNzc1OTMzM2MxZTk1ZWU4OGVjNjdiMDc3NTk3ZSIsInByZUhhc2giOiIxMGViNzc1OTMzM2MxZTk1ZWU4OGVjNjdiMDc3NTk3ZSIsImFjY2Vzc0tleSI6IiIsImFjY2Vzc1NlY3JldCI6IiIsImdpdGh1YiI6IiIsImdvb2dsZSI6IiIsInFxIjoiIiwid2VjaGF0IjoiIiwiZmFjZWJvb2siOiIiLCJkaW5ndGFsayI6IiIsIndlaWJvIjoiIiwiZ2l0ZWUiOiIiLCJsaW5rZWRpbiI6IiIsIndlY29tIjoiIiwibGFyayI6IiIsImdpdGxhYiI6IiIsImNyZWF0ZWRJcCI6IiIsImxhc3RTaWduaW5UaW1lIjoiIiwibGFzdFNpZ25pbklwIjoiIiwicHJlZmVycmVkTWZhVHlwZSI6IiIsInJlY292ZXJ5Q29kZXMiOm51bGwsInRvdHBTZWNyZXQiOiIiLCJtZmFQaG9uZUVuYWJsZWQiOmZhbHNlLCJtZmFFbWFpbEVuYWJsZWQiOmZhbHNlLCJsZGFwIjoiIiwicHJvcGVydGllcyI6e30sInJvbGVzIjpbXSwicGVybWlzc2lvbnMiOltdLCJncm91cHMiOltdLCJsYXN0U2lnbmluV3JvbmdUaW1lIjoiIiwic2lnbmluV3JvbmdUaW1lcyI6MCwidG9rZW5UeXBlIjoiYWNjZXNzLXRva2VuIiwidGFnIjoiIiwic2NvcGUiOiJyZWFkIiwiaXNzIjoiaHR0cHM6Ly90dWJpZS5jYXNkb29yLmNvbSIsInN1YiI6ImIxODVmZWVmLTQwMmQtNDFlMi05MWE0LTlmMDk1N2NlOWJkZiIsImF1ZCI6WyI1YmE2NmZjODRmYTE5NDZjOWI1NSJdLCJleHAiOjE3MDA4NTcwNzIsIm5iZiI6MTcwMDI1MjI3MiwiaWF0IjoxNzAwMjUyMjcyLCJqdGkiOiJhZG1pbi85MzNiMTA2Yy00ZWRkLTQ4MzEtOThmYi1hODcxZmIyYjMyZGEifQ.Y-X5sVshU6a_xKyyFShIr_VT67AqGq0b7LuXDdQE6o0QUnMizNCXPB50dJxUQ4hfTpoOUDCnYV01he9rEb6lK4iUCuRkMhrfpxZFweX9stsD2f6AoBDzBFS_sJSQL_5UAhj99UepgznUqCWxUbW3PCM0mD17p96T5w_ld8nEK9oVN1ec6rMiiD2xximSoQrlwfNoKk5fbB3P_T1Xpk0PkvGRbN198MFNWMV5_0DDcHAGvqIm0sXANuLV8ZdMM89H68Kj788eM1aCO9cw4TAaoFbimInDAm1voLB8w9D84A6rml-4RJMP8gF6AFSqueldJAEbyEPHJUS3wSjJfWGJE6Eb3yTjp0rN8MRyumLD8pwCx94ZuSKhad0yFn-n3BWZW2BWX6wtmFqt8szpMWhNug6t3gtDnrDvqWumex0GgOehIqZrX5uULZiKAktPjYxLC9o7Nu5SacKA0RKieYFG4woa64hzDK7spvSW8faLF-eUgIiguttJKjHw0riDlTnKdUntH2Sm_9Ma8re1QgWlo4YCRPYmDqt6_rQjVWywpzRV_X-4wrsMUXI6Zhncrjz9dXVngLd0WKf4deKbirqcV7kGMH2BGjS-gz2CC4ccWDcDh1b_j_aBfLRd6clG56nR7yU0jI8LNLoFKyVnyw8o62ynv8dqQw-Stxp5Kx5KlRY",
   "id_token":"eyJhbGciOiJSUzI1NiIsImtpZCI6ImNlcnQtYnVpbHQtaW4iLCJ0eXAiOiJKV1QifQ.eyJvd25lciI6ImJ1aWx0LWluIiwibmFtZSI6Imphc29uIiwiY3JlYXRlZFRpbWUiOiIyMDIzLTExLTE0VDIzOjU4OjEwKzA4OjAwIiwidXBkYXRlZFRpbWUiOiIiLCJpZCI6ImIxODVmZWVmLTQwMmQtNDFlMi05MWE0LTlmMDk1N2NlOWJkZiIsInR5cGUiOiJub3JtYWwtdXNlciIsInBhc3N3b3JkIjoiIiwicGFzc3dvcmRTYWx0IjoiIiwicGFzc3dvcmRUeXBlIjoicGxhaW4iLCJkaXNwbGF5TmFtZSI6Imphc29uIG1leWVycyIsImZpcnN0TmFtZSI6IiIsImxhc3ROYW1lIjoiIiwiYXZhdGFyIjoiaHR0cHM6Ly9jZG4uY2FzYmluLm9yZy9pbWcvY2FzYmluLnN2ZyIsImF2YXRhclR5cGUiOiIiLCJwZXJtYW5lbnRBdmF0YXIiOiIiLCJlbWFpbCI6Imphc29ubWV5ZXJzMjFAeWFob28uY29tIiwiZW1haWxWZXJpZmllZCI6ZmFsc2UsInBob25lIjoiIiwiY291bnRyeUNvZGUiOiIiLCJyZWdpb24iOiIiLCJsb2NhdGlvbiI6IiIsImFkZHJlc3MiOltdLCJhZmZpbGlhdGlvbiI6IiIsInRpdGxlIjoiIiwiaWRDYXJkVHlwZSI6IiIsImlkQ2FyZCI6IiIsImhvbWVwYWdlIjoiIiwiYmlvIjoiIiwibGFuZ3VhZ2UiOiIiLCJnZW5kZXIiOiIiLCJiaXJ0aGRheSI6IiIsImVkdWNhdGlvbiI6IiIsInNjb3JlIjoyMDAwLCJrYXJtYSI6MCwicmFua2luZyI6NCwiaXNEZWZhdWx0QXZhdGFyIjpmYWxzZSwiaXNPbmxpbmUiOmZhbHNlLCJpc0FkbWluIjpmYWxzZSwiaXNGb3JiaWRkZW4iOmZhbHNlLCJpc0RlbGV0ZWQiOmZhbHNlLCJzaWdudXBBcHBsaWNhdGlvbiI6ImFwcC1idWlsdC1pbiIsImhhc2giOiIxMGViNzc1OTMzM2MxZTk1ZWU4OGVjNjdiMDc3NTk3ZSIsInByZUhhc2giOiIxMGViNzc1OTMzM2MxZTk1ZWU4OGVjNjdiMDc3NTk3ZSIsImFjY2Vzc0tleSI6IiIsImFjY2Vzc1NlY3JldCI6IiIsImdpdGh1YiI6IiIsImdvb2dsZSI6IiIsInFxIjoiIiwid2VjaGF0IjoiIiwiZmFjZWJvb2siOiIiLCJkaW5ndGFsayI6IiIsIndlaWJvIjoiIiwiZ2l0ZWUiOiIiLCJsaW5rZWRpbiI6IiIsIndlY29tIjoiIiwibGFyayI6IiIsImdpdGxhYiI6IiIsImNyZWF0ZWRJcCI6IiIsImxhc3RTaWduaW5UaW1lIjoiIiwibGFzdFNpZ25pbklwIjoiIiwicHJlZmVycmVkTWZhVHlwZSI6IiIsInJlY292ZXJ5Q29kZXMiOm51bGwsInRvdHBTZWNyZXQiOiIiLCJtZmFQaG9uZUVuYWJsZWQiOmZhbHNlLCJtZmFFbWFpbEVuYWJsZWQiOmZhbHNlLCJsZGFwIjoiIiwicHJvcGVydGllcyI6e30sInJvbGVzIjpbXSwicGVybWlzc2lvbnMiOltdLCJncm91cHMiOltdLCJsYXN0U2lnbmluV3JvbmdUaW1lIjoiIiwic2lnbmluV3JvbmdUaW1lcyI6MCwidG9rZW5UeXBlIjoiYWNjZXNzLXRva2VuIiwidGFnIjoiIiwic2NvcGUiOiJyZWFkIiwiaXNzIjoiaHR0cHM6Ly90dWJpZS5jYXNkb29yLmNvbSIsInN1YiI6ImIxODVmZWVmLTQwMmQtNDFlMi05MWE0LTlmMDk1N2NlOWJkZiIsImF1ZCI6WyI1YmE2NmZjODRmYTE5NDZjOWI1NSJdLCJleHAiOjE3MDA4NTcwNzIsIm5iZiI6MTcwMDI1MjI3MiwiaWF0IjoxNzAwMjUyMjcyLCJqdGkiOiJhZG1pbi85MzNiMTA2Yy00ZWRkLTQ4MzEtOThmYi1hODcxZmIyYjMyZGEifQ.Y-X5sVshU6a_xKyyFShIr_VT67AqGq0b7LuXDdQE6o0QUnMizNCXPB50dJxUQ4hfTpoOUDCnYV01he9rEb6lK4iUCuRkMhrfpxZFweX9stsD2f6AoBDzBFS_sJSQL_5UAhj99UepgznUqCWxUbW3PCM0mD17p96T5w_ld8nEK9oVN1ec6rMiiD2xximSoQrlwfNoKk5fbB3P_T1Xpk0PkvGRbN198MFNWMV5_0DDcHAGvqIm0sXANuLV8ZdMM89H68Kj788eM1aCO9cw4TAaoFbimInDAm1voLB8w9D84A6rml-4RJMP8gF6AFSqueldJAEbyEPHJUS3wSjJfWGJE6Eb3yTjp0rN8MRyumLD8pwCx94ZuSKhad0yFn-n3BWZW2BWX6wtmFqt8szpMWhNug6t3gtDnrDvqWumex0GgOehIqZrX5uULZiKAktPjYxLC9o7Nu5SacKA0RKieYFG4woa64hzDK7spvSW8faLF-eUgIiguttJKjHw0riDlTnKdUntH2Sm_9Ma8re1QgWlo4YCRPYmDqt6_rQjVWywpzRV_X-4wrsMUXI6Zhncrjz9dXVngLd0WKf4deKbirqcV7kGMH2BGjS-gz2CC4ccWDcDh1b_j_aBfLRd6clG56nR7yU0jI8LNLoFKyVnyw8o62ynv8dqQw-Stxp5Kx5KlRY",
   "refresh_token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJvd25lciI6ImJ1aWx0LWluIiwibmFtZSI6Imphc29uIiwiY3JlYXRlZFRpbWUiOiIyMDIzLTExLTE0VDIzOjU4OjEwKzA4OjAwIiwidXBkYXRlZFRpbWUiOiIiLCJpZCI6ImIxODVmZWVmLTQwMmQtNDFlMi05MWE0LTlmMDk1N2NlOWJkZiIsInR5cGUiOiJub3JtYWwtdXNlciIsInBhc3N3b3JkIjoiIiwicGFzc3dvcmRTYWx0IjoiIiwicGFzc3dvcmRUeXBlIjoicGxhaW4iLCJkaXNwbGF5TmFtZSI6Imphc29uIG1leWVycyIsImZpcnN0TmFtZSI6IiIsImxhc3ROYW1lIjoiIiwiYXZhdGFyIjoiaHR0cHM6Ly9jZG4uY2FzYmluLm9yZy9pbWcvY2FzYmluLnN2ZyIsImF2YXRhclR5cGUiOiIiLCJwZXJtYW5lbnRBdmF0YXIiOiIiLCJlbWFpbCI6Imphc29ubWV5ZXJzMjFAeWFob28uY29tIiwiZW1haWxWZXJpZmllZCI6ZmFsc2UsInBob25lIjoiIiwiY291bnRyeUNvZGUiOiIiLCJyZWdpb24iOiIiLCJsb2NhdGlvbiI6IiIsImFkZHJlc3MiOltdLCJhZmZpbGlhdGlvbiI6IiIsInRpdGxlIjoiIiwiaWRDYXJkVHlwZSI6IiIsImlkQ2FyZCI6IiIsImhvbWVwYWdlIjoiIiwiYmlvIjoiIiwibGFuZ3VhZ2UiOiIiLCJnZW5kZXIiOiIiLCJiaXJ0aGRheSI6IiIsImVkdWNhdGlvbiI6IiIsInNjb3JlIjoyMDAwLCJrYXJtYSI6MCwicmFua2luZyI6NCwiaXNEZWZhdWx0QXZhdGFyIjpmYWxzZSwiaXNPbmxpbmUiOmZhbHNlLCJpc0FkbWluIjpmYWxzZSwiaXNGb3JiaWRkZW4iOmZhbHNlLCJpc0RlbGV0ZWQiOmZhbHNlLCJzaWdudXBBcHBsaWNhdGlvbiI6ImFwcC1idWlsdC1pbiIsImhhc2giOiIxMGViNzc1OTMzM2MxZTk1ZWU4OGVjNjdiMDc3NTk3ZSIsInByZUhhc2giOiIxMGViNzc1OTMzM2MxZTk1ZWU4OGVjNjdiMDc3NTk3ZSIsImFjY2Vzc0tleSI6IiIsImFjY2Vzc1NlY3JldCI6IiIsImdpdGh1YiI6IiIsImdvb2dsZSI6IiIsInFxIjoiIiwid2VjaGF0IjoiIiwiZmFjZWJvb2siOiIiLCJkaW5ndGFsayI6IiIsIndlaWJvIjoiIiwiZ2l0ZWUiOiIiLCJsaW5rZWRpbiI6IiIsIndlY29tIjoiIiwibGFyayI6IiIsImdpdGxhYiI6IiIsImNyZWF0ZWRJcCI6IiIsImxhc3RTaWduaW5UaW1lIjoiIiwibGFzdFNpZ25pbklwIjoiIiwicHJlZmVycmVkTWZhVHlwZSI6IiIsInJlY292ZXJ5Q29kZXMiOm51bGwsInRvdHBTZWNyZXQiOiIiLCJtZmFQaG9uZUVuYWJsZWQiOmZhbHNlLCJtZmFFbWFpbEVuYWJsZWQiOmZhbHNlLCJsZGFwIjoiIiwicHJvcGVydGllcyI6e30sInJvbGVzIjpbXSwicGVybWlzc2lvbnMiOltdLCJncm91cHMiOltdLCJsYXN0U2lnbmluV3JvbmdUaW1lIjoiIiwic2lnbmluV3JvbmdUaW1lcyI6MCwidG9rZW5UeXBlIjoicmVmcmVzaC10b2tlbiIsInRhZyI6IiIsInNjb3BlIjoicmVhZCIsImlzcyI6Imh0dHBzOi8vdHViaWUuY2FzZG9vci5jb20iLCJzdWIiOiJiMTg1ZmVlZi00MDJkLTQxZTItOTFhNC05ZjA5NTdjZTliZGYiLCJhdWQiOlsiNWJhNjZmYzg0ZmExOTQ2YzliNTUiXSwiZXhwIjoxNzAwODU3MDcyLCJuYmYiOjE3MDAyNTIyNzIsImlhdCI6MTcwMDI1MjI3MiwianRpIjoiYWRtaW4vOTMzYjEwNmMtNGVkZC00ODMxLTk4ZmItYTg3MWZiMmIzMmRhIn0.poKAw1m3aib-bwn4VrfDNMtND12U241TQujSZB7vQFuV3_Nv_nplLYOjFVXrXyptxO77wgiG90xxpHo9QbJp7Rkz-PffGPH75YlCrBwnavvDtUVnaqWrJ72d05Jrj-fwLyqhaFEEsjyZTLWRMBNiWMSSyNNUvy4MRUsh_OnXEJ_W_ocE4Yb0K85VlDrs3eN2LKSj-ZM60ZwdN97ZikuJ0qbCYTVYEcoy-MbIh5t_3QovBFrvWVvZgpzO1uT7XOdkd8F_TDbgKGGqmLaBxvZlK7ReJu0W5NBaZFKCkzY-whFOvAC2niyDx9V8A_3WALUPo_SJIUgVd2CqEwbtSO0JuUcoaiDg9gTR97h60qPDH-b3Xn-bTjT6bneFnHhSIoIa5MjEzFgN5K71SbsWOdLkpDzRFq_7pOjW_wTArD1dYXaW2YNCfNxWrQu4DApbS7-2MuIgrokSoXJm0yGYSM5irBV3mM-loaTccF4Ha2kljn1FAwXbsAliK1KAyxcp76ejLonz9Ry-7hYJ_UZca-qEl0HxzvMVD6qPdDsT-sPnk0j0v4ZEKU0KxMDrxN8X_hZGBN1uz_INXS3Kt3wA-5gmD9kQGNSqjvVqjh96mKTzuqwLriQI11ykrnKyC6HnzQayTK7r_JgJldZDEHPecvCaCT3Jykct-v6MWHLTzZvZPAI",
   "token_type":"Bearer",
   "expires_in":604800,
   "scope":"read"
}';




  
 

echo 200;
?>